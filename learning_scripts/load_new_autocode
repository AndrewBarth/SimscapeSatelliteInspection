#!/bin/bash

# Default to always clean first
xclean=1

while getopts ":c" opt; do
  echo $opt
  case $opt in
    #c) clean="$OPTARG"
    c) xclean=1
    ;;
    \?) echo "Invalid option -$OPTARG" >&2
    exit 1
    ;;
  esac
done

# Define the directories to work in
current_dir=`pwd`
base_dir="${HOME}/SimscapeSatelliteInspection"
build_dir="${base_dir}/SimscapeSatelliteInspection"

# Directories to copy
matlab_dir="R2023a"
src_dir="SimscapeSatelliteInspection/SatelliteServicing_Mission_ert_rtw"
slprj_dir="SimscapeSatelliteInspection/slprj"

echo $build_dir
echo $matlab_dir
echo $src_dir
echo $slprj_dir

if [[ $xclean -eq 1 ]] ; then
 echo "Cleaning destination"
 rm -rf $build_dir/*
 rm -rf $base_dir/$matlab_dir
fi

# Move autogenerated code
mv $src_dir $build_dir
mv $slprj_dir $build_dir
mv $matlab_dir $base_dir
